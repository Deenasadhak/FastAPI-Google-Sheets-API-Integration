==============================================================
   FASTAPI + GOOGLE SHEETS API INTEGRATION - FULL REPORT
==============================================================

Project Status: SUCCESS (Production-Ready)
Server Location: http://127.0.0.1:8000
Interactive Docs: http://127.0.0.1:8000/docs
Spreadsheet ID: 1mwwRc7qGKspJt5oppgUxDMJJpkf0eOB5t_BIs9Y5sPo

--------------------------------------------------------------
1. SECURITY & CONFIGURATION
--------------------------------------------------------------
- Service Account Auth: Configured successfully using `credentials.json`.
- Environment Variables: Environment isolation achieved via `.env` file. Pydantic Settings enforces that the app will not start if the Spreadsheet ID or Credentials file are missing.
- Global Exception Handling: Raw stack traces are hidden from users. Python exceptions are caught centrally and formatted into strict JSON HTTP responses (e.g., 500 Internal Server Error, 422 Unprocessable Entity).

--------------------------------------------------------------
2. API ENDPOINTS REFERENCE
--------------------------------------------------------------

[1] GET /api/v1/health
    Description: Checks if the API is online.
    Response (200 OK):
    {
      "status": "success",
      "message": "API is up and running",
      "data": {"status": "healthy"}
    }

[2] POST /api/v1/data
    Description: Appends a new user record to the next empty row.
    Request Body (JSON):
    {
      "name": "Deenasadhak",
      "email": "test@gmail.com",
      "age": 21
    }
    Response (200 OK):
    {
      "status": "success",
      "message": "Successfully added new row",
      "data": {"appended_range": "Sheet1!A2:C2"}
    }

[3] GET /api/v1/data
    Description: Fetches all rows from the spreadsheet.
    Response (200 OK):
    {
      "status": "success",
      "message": "Successfully retrieved data",
      "data": [
        {
          "row_number": 2,
          "name": "Deenasadhak",
          "email": "test@gmail.com",
          "age": 21
        }
      ]
    }

[4] PUT /api/v1/data/{row_number}
    Description: Overwrites data at a specific row (e.g., row 2).
    URL Example: /api/v1/data/2
    Request Body (JSON):
    {
      "name": "John Updated",
      "email": "john@updated.com",
      "age": 25
    }

[5] DELETE /api/v1/data/{row_number}
    Description: Clears the content of a specific row.
    URL Example: /api/v1/data/2
    Response (200 OK):
    {
      "status": "success",
      "message": "Successfully cleared row 2",
      "data": {"cleared_range": "Sheet1!A2:C2"}
    }


--------------------------------------------------------------
3. DATA VALIDATION RULES (Pydantic)
--------------------------------------------------------------
The API will inherently reject bad requests before processing.
- `name`: Must be at least 2 characters long.
- `age`: Must be an integer greater than 0.
- `email`: Must be a valid format (e.g., test@gmail.com).

If validation fails, the API responds with a 422 Unprocessable Entity:
{
  "status": "error",
  "message": "Unprocessable Entity",
  "details": [
    {
      "type": "string_too_short",
      "loc": ["body", "name"],
      "msg": "String should have at least 2 characters"
    }
  ]
}

--------------------------------------------------------------
4. SUMMARY OF FIXES DURING VALIDATION
--------------------------------------------------------------
- Pydantic Email Validation: Added the `email-validator` python package to allow `EmailStr` to validate email formats properly.
- Startup Logging: Implemented logging block prior to Google Auth initialization so runtime parameters are visible in the console.

--------------------------------------------------------------
5. DEPLOYMENT READINESS
--------------------------------------------------------------
The API is completely ready to be deployed.
1. Commit the `fastapi-sheets-api` folder to GitHub (ensure `credentials.json` and `.env` are ignored, which they currently are).
2. Connect to a service like Render.com.
3. Configure the start command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
4. Inject the environment variables (`SPREADSHEET_ID` and `GOOGLE_CREDENTIALS_FILE` content) using Render's secret/environment settings.
